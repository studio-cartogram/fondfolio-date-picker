import React from 'react'
import styled from 'styled-components'
import { monthTitleStyles, monthHeaderStyles, monthNextPrevStyles } from './styles'
import { clone, toMonthAndYearString } from '../dateHelpers'

const StyledMonthHeader = styled.div`${monthHeaderStyles}`
const StyledMonthTitle = styled.div`${monthTitleStyles}`
const StyledMonthNextPrev = styled.a`${monthNextPrevStyles}`

class MonthHeader extends React.Component {
  constructor(props) {
    super(props)
    this.state = {
      view: props.view,
    }
  }

  moveBackward = () => {
    const view = clone(this.state.view)
    view.setMonth(view.getMonth()-1)
    this.move(view, false)
  }

  moveForward = () => {
    const view = clone(this.state.view);
    view.setMonth(view.getMonth()+1);
    this.move(view, true);
  }

  move = (view, isForward) => {
    this.setState({
      view
    })

    this.props.onMove(view, isForward);
  }

  render() {

    const {
      ArrowRight,
      ArrowLeft,
      MonthName,
      ...rest
    } = this.props

    return (
      <StyledMonthHeader {...rest}>
        <StyledMonthNextPrev onClick={this.moveBackward}><ArrowLeft /></StyledMonthNextPrev>
        <StyledMonthTitle><MonthName>{toMonthAndYearString(this.state.view)}</MonthName></StyledMonthTitle>
        <StyledMonthNextPrev onClick={this.moveForward}><ArrowRight /></StyledMonthNextPrev>
      </StyledMonthHeader>
    )
  }
}
export default MonthHeader
