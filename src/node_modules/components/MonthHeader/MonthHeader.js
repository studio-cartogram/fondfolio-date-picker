import React from 'react'
import styled from 'styled-components'
import { monthTitleStyles, monthHeaderStyles, monthNextPrevStyles } from './styles'
import { clone, toMonthAndYearString } from '../DateUtils'

const StyledMonthHeader = styled.div`${monthHeaderStyles}`
const StyledMonthTitle = styled.div`${monthTitleStyles}`
const StyledMonthNextPrev = styled.a`${monthNextPrevStyles}`

class MonthHeader extends React.Component {
  state = {
    view: new Date()
  }

  moveBackward = () => {
    const view = clone(this.state.view)
    view.setMonth(view.getMonth()-1)
    this.move(view, false)
  }

  moveForward = () => {
    const view = clone(this.state.view);
    view.setMonth(view.getMonth()+1);
    this.move(view, true);
  }

  move = (view, isForward) => {
    this.setState({
      view
    })

    this.props.onMove(view, isForward);
  }

  render() {

    const {
      ...rest
    } = this.props

    return (
      <StyledMonthHeader {...rest}>
        <StyledMonthNextPrev onClick={this.moveBackward}>{String.fromCharCode(9664)}</StyledMonthNextPrev>
        <StyledMonthTitle>{toMonthAndYearString(this.state.view)}</StyledMonthTitle>
        <StyledMonthNextPrev onClick={this.moveForward}>{String.fromCharCode(9654)}</StyledMonthNextPrev>
      </StyledMonthHeader>
    )
  }
}
export default MonthHeader
